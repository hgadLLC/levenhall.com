---
interface Props {
    title: string;
    description?: string;
}

const { title, description = 'Strategic defense market access for international firms from allied democracies.' } = Astro.props;

import Nav from '../components/Nav.astro';
import Footer from '../components/Footer.astro';
import '../styles/global.css';
---

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{title}</title>
    <meta name="description" content={description}>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Text:wght@400;600;700&family=Source+Sans+Pro:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <Nav />
    <main>
        <slot />
    </main>
    <Footer />

    <script>
        // Nav shadow on scroll
        const nav = document.querySelector('nav');
        if (nav) {
            window.addEventListener('scroll', () => {
                nav.style.boxShadow = window.scrollY > 50
                    ? '0 3px 25px rgba(0, 0, 0, 0.4)'
                    : 'none';
            });
        }

        // Scroll reveal
        const revealElements = document.querySelectorAll('.reveal');
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    observer.unobserve(entry.target);
                }
            });
        }, { threshold: 0.15, rootMargin: '0px 0px -50px 0px' });

        revealElements.forEach(el => observer.observe(el));

        // Fallback reveal after 2s
        setTimeout(() => {
            revealElements.forEach(el => {
                if (!el.classList.contains('active')) el.classList.add('active');
            });
        }, 2000);
    </script>
</body>
</html>
